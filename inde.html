<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Shop</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="menu">
        <img src="asserts/menuimg-removebg-preview.png" alt="Menu" onclick="openNav()">
    </div>

    <!-- Sidebar -->
    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">Ã—</a>
        <a href="javascript:void(0)" onclick="sortBooks('alphabetical')">Sort Alphabetically</a>
        <a href="javascript:void(0)" onclick="sortBooks('price')">Sort by Price</a>
    </div>

    <div class="logo">
        <h1>Book Shop</h1>
        <img src="asserts/bookimg-removebg-preview.png" class="bookimg">
    </div>

    <div class="nav">
        <li>Home</li>
        <li><a href="about.html">About</a></li>
        <li>Shop Online</li>
        <li><a href="login.html">Login</a></li>
        <li><a href="cart.html">My Cart</a></li>
    </div>

    <div class="search">
        <input id="search-bar" type="text" placeholder="Search the Book...">
    </div>

    

    <div class="container"></div>
    

    <div class="slider-container">
        <div class="slider">
            <img src="https://www.shutterstock.com/image-vector/promo-banner-bookstore-bookshop-library-260nw-1976145590.jpg" alt="Slide 1">
            <img src="https://www.shutterstock.com/image-vector/banner-books-concept-bookstore-bookshop-260nw-2331880681.jpg" alt="Slide 2">
            <img src="https://static.vecteezy.com/system/resources/previews/023/107/438/non_2x/promo-banner-with-reading-bookshelve-with-stack-of-books-globe-inkwell-quill-world-book-day-bookstore-bookshop-library-book-lover-bibliophile-education-for-poster-cover-advertising-vector.jpg" alt="Slide 3">
        </div>
    </div>

   

    <hr>

    <div class="newarrivals">
        <h2>ðŸ“š New Arrivals ðŸ“š</h2>
        <div class="book-container">
            <div class="book">
                <img src="https://www.maplepress.co.in/cdn/shop/files/boardbookssetof5_700x700.jpg?v=1689059623" alt="Book 1">
                <div class="book-title">Board Books Set</div>
                <div class="book-price">â‚¹599</div>
            </div>
            <div class="book">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ3a8zaSItzmI0TipJSAEwSWG4Op0jpMKAP7Q&s" alt="Book 2">
                <div class="book-title">Classic Literature</div>
                <div class="book-price">â‚¹349</div>
            </div>
            <div class="book">
                <img src="https://images-na.ssl-images-amazon.com/images/I/916G0hqH01L._AC_UL210_SR210,210_.jpg" alt="Book 3">
                <div class="book-title">The Lost World</div>
                <div class="book-price">â‚¹299</div>
            </div>
            <div class="book">
                <img src="https://m.media-amazon.com/images/I/A15A7wamBML._UF350,350_QL50_.jpg" alt="Book 4">
                <div class="book-title">The Mystery Novel</div>
                <div class="book-price">â‚¹399</div>
            </div>
            <div class="book">
                <img src="https://m.media-amazon.com/images/I/81iOvLLu4OL._AC_UF1000,1000_QL80_.jpg" alt="Book 5">
                <div class="book-title">The Science Handbook</div>
                <div class="book-price">â‚¹499</div>
            </div>
            <div class="book">
                <img src="https://m.media-amazon.com/images/I/71LhjimPd8L._AC_UF1000,1000_QL80_.jpg" alt="Book 6">
                <div class="book-title">The Fantasy World</div>
                <div class="book-price">â‚¹449</div>
            </div>
            <div class="book">
                <img src="https://images-cdn.ubuy.co.in/66a54367b2ee6567cc7af079-verity-special-edition-hardcover.jpg" alt="Book 7">
                <div class="book-title">Verity - Special Edition</div>
                <div class="book-price">â‚¹899</div>
            </div>
            <div class="book">
                <img src="https://m.media-amazon.com/images/I/81wiZw1LEXL._AC_UF1000,1000_QL80_.jpg" alt="Book 8">
                <div class="book-title">Self Improvement Guide</div>
                <div class="book-price">â‚¹349</div>
            </div>
            <div class="book">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSz9BaDLGLH8ZLd3YuAFKllR1hmz0HQpouR0A&s" alt="Book 9">
                <div class="book-title">Children's Storybook</div>
                <div class="book-price">â‚¹299</div>
            </div>
            <div class="book">
                <img src="https://m.media-amazon.com/images/I/81JJPDNlxSL._AC_UF1000,1000_QL80_.jpg" alt="Book 10">
                <div class="book-title">Modern Philosophy</div>
                <div class="book-price">â‚¹649</div>
            </div>
        </div>
    </div>

    <div class="oneslider">
        <img src="asserts/bookslider.png" alt="">
    </div>

    <footer>
       <p> BookShop@2025</p>
       <p>Chennai</p>
       <p>908746575</p>
    </footer>

    <script>
        function openNav() {
            document.getElementById("mySidebar").style.width = "250px";
        }

        function closeNav() {
            document.getElementById("mySidebar").style.width = "0";
        }

        document.addEventListener("DOMContentLoaded", () => {
            const searchBar = document.getElementById("search-bar");
            const container = document.querySelector(".container");

            const fetchBooks = async (query = "") => {
                try {
                    const response = await fetch(`/books?${query}`);
                    if (!response.ok) throw new Error("Failed to fetch books");

                    const books = await response.json();

                    container.innerHTML = "";

                    if (books.length === 0) {
                        container.innerHTML = "<p>No books found</p>";
                        return;
                    }

                    books.forEach((book) => {
                        const card = document.createElement("div");
                        card.className = "card";
                        card.innerHTML = `
                            <img src="${book.img}" alt="${book.bookname}">
                            <p style="font-weight:bold">${book.bookname}</p>
                            <span style="color: red; font-size: 23px;">$${book.price}</span>
                            <br>
                            <button class="addtocard" data-book='${JSON.stringify(book)}'>Add to Cart</button>
                            <button class="buy-now" data-book='${JSON.stringify(book)}'>Buy Now</button>
                        `;
                        container.appendChild(card);
                    });

                    // Add to Cart Functionality
                    document.querySelectorAll(".addtocard").forEach((button) =>
                        button.addEventListener("click", (e) => {
                            const bookData = JSON.parse(e.target.dataset.book);
                            const cart = JSON.parse(localStorage.getItem("cart")) || [];
                            cart.push(bookData);
                            localStorage.setItem("cart", JSON.stringify(cart));
                            alert(`${bookData.bookname} added to cart!`);
                        })
                    );

                    // Buy Now Functionality
                    document.querySelectorAll(".buy-now").forEach((button) =>
                        button.addEventListener("click", (e) => {
                            const bookData = JSON.parse(e.target.dataset.book);
                            localStorage.setItem("selectedBook", JSON.stringify(bookData));
                            window.location.href = "order.html";
                        })
                    );
                } catch (error) {
                    console.error("Error loading books:", error);
                    container.innerHTML = "<p>Error loading books. Please try again later.</p>";
                }
            };

            fetchBooks();

            searchBar.addEventListener("input", (e) => {
                fetchBooks(`search=${e.target.value}`);
            });

            window.sortBooks = (sortOption) => {
                fetchBooks(`sort=${sortOption}`);
            };
        });
    </script>
</body>
</html>
